# 红黑树

* 红黑树（Red Black Tree）是一种自平衡的二叉查找树。除了符合二叉查找树的基本特性外，还具有以下特性：

  * 1、节点是红色或黑色
  * 2、根结点是黑色
  * 3、每个叶子节点都是黑色的空节点（NIL节点）
  * 4、每个红色节点的两个子节点都是黑色（从每个叶子到根的所有路径上不能有两个连续的红色节点）
  * 5、从任意节点到树的末端的所有路径都包含相同数目的黑色节点

  **注：** 特性（5），确保没有一条路径会比其他路径长出两倍。因而，红黑树是相对接近平衡的二叉树

## 插入操作

* 按照二叉搜索树的规则，插入的节点为红色

## 修正操作

* 根据插入节点的父节点情况，可以分为三种情况来处理

  * 情况说明：被插入的节点是根节点

    处理方法：直接将此节点涂为黑色

  * 情况说明：被插入的节点的父节点是黑色

    处理方法：无，仍然符合红黑树

  * 情况说明：被插入的节点的父节点是红色

    处理方法：与特性（4）冲突，这种情况下，被插入节点是一定存在非空祖父节点的；进一步的讲，被插入节点也一定存在叔叔节点(即使叔叔节点为空，我们也视之为存在，空节点本身就是黑色节点)。理解这点之后，我们依据"叔叔节点的情况"，将这种情况进一步划分为3种情况(Case)。

  |        | **现象说明**                                                 | **处理策略**                                                 |
  | ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | Case 1 | 当前节点的父节点是红色，且当前节点的祖父节点的另一个子节点（叔叔节点）也是红色。 | (01) 将“父节点”设为黑色。 (02) 将“叔叔节点”设为黑色。 (03) 将“祖父节点”设为“红色”。 (04) 将“祖父节点”设为“当前节点”(红色节点)；即，之后继续对“当前节点”进行操作。 |
  | Case 2 | 当前节点的父节点是红色，叔叔节点是黑色，且当前节点是其父节点的右孩子 | (01) 将“父节点”作为“新的当前节点”。 (02) 以“新的当前节点”为支点进行左旋。 |
  | Case 3 | 当前节点的父节点是红色，叔叔节点是黑色，且当前节点是其父节点的左孩子 | (01) 将“父节点”设为“黑色”。 (02) 将“祖父节点”设为“红色”。 (03) 以“祖父节点”为支点进行右旋。 |

**以上三种情况处理问题的核心思想：将红色的节点移到根节点；然后将根节点设为黑色。**

## 修正操作*改*

* 当父节点为红，叔节点为黑时（四种情况）：
  * 当前节点在左子树，父节点为左节点（左左）：把祖父节点设为当前节点，并涂红色，父节点涂黑色，右旋
  * 当前节点在左子树，父节点为右节点（左右）：以父节点为当前节点，左旋，然后变成情况1
  * 当前节点在右子树，父节点在左节点（右左）：以父节点设置为当前节点，右旋，然后变成情况3
  * 当前节点在右子树，父节点在右节点（右右）：把祖父节点涂为红色，并设置为当前节点，父节点涂为黑色，左旋

## 删除操作

